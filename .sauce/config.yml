# Configuration file for Sauce Labs and Playwright integration
# This file defines the structure and parameters for executing Playwright tests
# in various environments via Sauce Labs.

apiVersion: v1alpha # API version for Sauce Labs configuration
kind: playwright    # Specifies that this is a Playwright configuration
metadata:
  name: playwright-tests # Name identifier for the test suite

sauce:
  region: us-west-1     # Sauce Labs region for test execution
  concurrency: 5        # Maximum number of concurrent test executions

rootDir: ./             # Root directory containing project files

artifacts:
  cleanup: true         # Clean up artifacts after test execution
  download:
    directory: ./artifacts # Directory for storing downloaded artifacts
    match:
      # Include all files (adjust to "*.log" if debugging specific logs)
      - ".*"
    when: always        # Always download artifacts after test execution

playwright:
  version: 1.49.0       # Version of Playwright to use for the tests
  configFile: ./playwright.config.ts

suites:
  # Test suite for Chrome
  - name: playwright-chrome-tests
    platformName:  "Windows 11" #"macOS 13"   # Operating system for the test suite
    params:
      browserName: chrome    # Browser to use (Chromium)
    timeout: 15m               # Timeout for the test suite
    testMatch:
      - "${SPEC_FILE}"         # Placeholder for the test file to execute

  # Test suite for Firefox
  # - name: firefox-tests
  #   platformName: "Windows 11" # Operating system for the test suite
  #   params:
  #     browserName: firefox     # Browser to use (Firefox)
  #   timeout: 15m               # Timeout for the test suite
  #   testMatch:
  #     - "${SPEC_FILE}"         # Placeholder for the test file to execute

  # # Test suite for Safari
  # - name: safari-tests
  #   platformName: "macOS 13"   # Operating system for the test suite
  #   params:
  #     browserName: webkit      # Browser to use (Safari/WebKit)
  #   timeout: 15m               # Timeout for the test suite
  #   testMatch:
  #     - "${SPEC_FILE}"         # Placeholder for the test file to execute

env:
  # Environment variables for configuring test behavior
  SAUCE_RUN: "true"               # Flag to indicate Sauce Labs execution
  BASE_URL: ${BASE_URL}           # Base URL for the application under test
  IS_DESKTOP: ${IS_DESKTOP}         # Flag for determining desktop vs mobile tests
  BLOCK_ANALYTICS_CALLS: ${BLOCK_ANALYTICS_CALLS} # Flag to block analytics calls
